<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pete Lawson">

<title>Introduction to APIs in Python ‚Äì Introduction to APIs in Python Materials</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-ff63373b1067ca6f91cf1456aa1f00a2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Introduction to APIs in Python Materials</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Introduction-to-APIs-in-Python-Presentation.html"> 
<span class="menu-text">Presentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Introduction-to-APIs-in-Python-Tutorial.html"> 
<span class="menu-text">Tutorial</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Introduction-to-APIs-in-Python.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introduction to APIs in Python</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Pete Lawson, Ph.D. <a href="mailto:plawson@jhu.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Data Services
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"></h2>
<p><img src="images/DataServices.png" class="img-fluid"></p>
</section>
<section id="learning-objectives" class="level2">
<h2 class="anchored" data-anchor-id="learning-objectives">Learning Objectives</h2>
<p>By the end of this workshop, you should be able to:</p>
<ul>
<li>Explain what an API is.</li>
<li>Be able to use API documentation to explore available API endpoints.</li>
<li>Fetch data from an API using the <code>requests</code> library.</li>
<li>Understand pagination and be able to apply strategies to work with API limits.</li>
<li>Use, and secure, an API key.</li>
</ul>
</section>
<section id="todays-session" class="level2">
<h2 class="anchored" data-anchor-id="todays-session">Today‚Äôs Session</h2>
<p>This session is a mixture of live-coding and lecture.</p>
<ul>
<li>Please mute your microphone üéôÔ∏è.</li>
<li>Please use the chat üí¨ feature to ask questions during the session.</li>
<li>We will have breaks every <code>50 minutes</code> ‚òï.</li>
<li>We will update <a href="https://codeshare.io/apis-in-python">codeshare.io/apis-in-python</a> during the live coding portion.</li>
<li>At the end of today‚Äôs session, please complete a short survey: <a href="https://bit.ly/apis-in-python-survey">bit.ly/apis-in-python-survey</a></li>
</ul>
</section>
<section id="ways-of-accessing-data" class="level2">
<h2 class="anchored" data-anchor-id="ways-of-accessing-data">Ways of accessing data</h2>
<p>. . .</p>
<div class="columns">
<div class="column" style="width:40%;">
<section id="manual" class="level4">
<h4 class="anchored" data-anchor-id="manual">Manual</h4>
<ul>
<li>Download files from the web (CSV, Excel, Text, Parquet, etc.)</li>
<li>Copy manually from websites (tables, charts, text)</li>
<li>Extract data from documents (Word or PDFs)</li>
</ul>
</section>
</div><div class="column" style="width:60%;">
<section id="automatic" class="level4">
<h4 class="anchored" data-anchor-id="automatic">Automatic</h4>
<ul>
<li>Databases</li>
<li>APIs</li>
<li>Web Scraping (Extract information from web pages programmatically)</li>
<li>Sensors</li>
</ul>
</section>
</div>
</div>
</section>
<section id="why-use-an-api" class="level2">
<h2 class="anchored" data-anchor-id="why-use-an-api">Why use an API?</h2>
<ul>
<li>You need the most up-to-date information.</li>
<li>You don‚Äôt need everything - you can ask for exactly what you want.</li>
<li>It‚Äôs repeatable - you can write code once, and reuse everytime you need new data.</li>
</ul>
</section>
<section id="what-is-an-api" class="level2">
<h2 class="anchored" data-anchor-id="what-is-an-api">What is an API?</h2>
<p>. . .</p>
<p>API stands for:</p>
<p><strong>A</strong>pplication <strong>P</strong>rogramming <strong>I</strong>nterface</p>
<p>. . .</p>
<p>An API provides a way to communicate between your computer (the client) and a remote web service (the server).</p>
<p>. . .</p>
<p><img src="https://voyager.postman.com/illustration/diagram-what-is-an-api-postman-illustration.svg" class="img-fluid"></p>
</section>
<section id="lets-get-cooking" class="level2">
<h2 class="anchored" data-anchor-id="lets-get-cooking">Lets get cooking üå∂Ô∏è</h2>
<p>. . .</p>
<p>You go to a restaurant.</p>
<p>. . .</p>
<p>Rather than waiting to be seated you poke your head into the kitchen, and ask for a grilled cheese sandwich.</p>
<p>. . .</p>
<p>The chef promptly throws a spatula at your head. Now you have nothing to show for your effort but a head injury.</p>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1"></h2>
<p>What went wrong?</p>
<p>. . .</p>
<p>You need someone to translate your request in a way the chef understands!</p>
<p>. . .</p>
<p>You need an <strong>API</strong>!</p>
</section>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2"></h2>
<p>Let‚Äôs try this again.</p>
<p>. . .</p>
<p>You (the <strong>client</strong>) enter the restaurant and are seated.</p>
<p>. . .</p>
<p>A waiter (the <strong>API</strong>) arrives to take your order. You ask for a grilled cheese, extra cheese, with tomato. The waiter notes your order on a slip of paper (the <strong>request</strong>), which he posts on the turnstile at the kitchen.</p>
<p>. . .</p>
<p>The chef (<strong>server</strong>) reviews the request‚Äôs instructions, prepares a grilled cheese sandwich , and places it on the kitchen window, and hit‚Äôs a bell.</p>
<p>. . .</p>
<p>Your server, hearing the bell, brings you the grilled cheese sandwhich (the <strong>response</strong>), along with an apology from the chef for the head injury.</p>
</section>
<section id="section-3" class="level2">
<h2 class="anchored" data-anchor-id="section-3"></h2>
<p><img src="https://voyager.postman.com/illustration/diagram-what-is-an-api-postman-illustration.svg" class="img-fluid"></p>
<ul>
<li><strong>Client</strong>: Requests grilled cheese</li>
<li><strong>API</strong>: Receives request and delivers to kitchen</li>
<li><strong>Server</strong>: Reviews request and generates <strong>response</strong> (grilled cheese)</li>
<li><strong>API</strong>: delivers response to client</li>
</ul>
</section>
<section id="types-of-apis" class="level2">
<h2 class="anchored" data-anchor-id="types-of-apis">Types of APIs</h2>
<p>. . .</p>
<p><strong>SOAP</strong> (legacy): XML-based, structured, rigid (common in banking/healthcare)</p>
<p>. . .</p>
<p><strong>REST</strong> (modern): Flexible, human-readable, usually returns JSON.</p>
</section>
<section id="requests" class="level2">
<h2 class="anchored" data-anchor-id="requests">Requests</h2>
<p>When you want data from an API, you send a <strong>request</strong>. This request contains:</p>
<ul>
<li>The <strong>name</strong> of the resource you would like to access (data)</li>
<li>A <strong>verb</strong> indicating what you want to do with the data.</li>
</ul>
</section>
<section id="rest-and-http-methods" class="level2">
<h2 class="anchored" data-anchor-id="rest-and-http-methods">REST and HTTP Methods</h2>
<p>Common <strong>verbs</strong> in Rest APIs:</p>
<ul>
<li><strong>Get</strong>: Retreive data (most common)</li>
<li><strong>Post</strong>: Create data</li>
<li><strong>Put</strong>: Update data</li>
<li><strong>Delete</strong>: Remove data</li>
</ul>
<p>. . .</p>
<p>For data retrieval, we use <strong>GET</strong>.</p>
<p>. . .</p>
<p>Example:<br>
<code>GET https://pokeapi.co/api/v2/pokemon?limit=3&amp;offset=0</code></p>
<hr>
</section>
<section id="api-request-structure" class="level2">
<h2 class="anchored" data-anchor-id="api-request-structure">API Request Structure</h2>
<p>A typical API request has four main parts:</p>
<ol type="1">
<li><strong>HTTP Verb</strong>: what we are doing <code>GET</code></li>
<li><strong>Base URL</strong>: main address <code>https://pokeapi.co/api/v2</code></li>
<li><strong>Endpoint</strong>: the specific resource we are acting on <code>/pokemon</code></li>
<li><strong>Query Parameters</strong>: optional filters<br>
<code>?limit=3&amp;offset=10</code></li>
</ol>
<p>. . .</p>
<p>Full request:<br>
<code>GET https://pokeapi.co/api/v2/pokemon?limit=3&amp;offset=10</code></p>
</section>
<section id="structure-of-an-api-response" class="level2">
<h2 class="anchored" data-anchor-id="structure-of-an-api-response">Structure of an API Response</h2>
<p>Each API response is composed of two parts:</p>
<p>. . .</p>
<p><strong>header</strong>: information about the data (metadata)</p>
<p>. . .</p>
<p><strong>body</strong>: the data (usually JSON)</p>
</section>
<section id="section-4" class="level2">
<h2 class="anchored" data-anchor-id="section-4"></h2>
<p>Think of an API response like an envelope you received in the mail.</p>
<p>. . .</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/7/7f/Envelope_-_Boonville_Address-000.jpg" class="img-fluid"></p>
</section>
<section id="section-5" class="level2">
<h2 class="anchored" data-anchor-id="section-5"></h2>
<p>On the outside of the envelope there is information like:</p>
<ul>
<li>The address it was addressed to</li>
<li>The address where it came from</li>
<li>The postage date, which indicates when it was posted</li>
</ul>
<p>. . .</p>
<p>This metadata, or ‚Äúdata about data‚Äù, tells you about the letter contained within ‚Äî who sent it, to whom, and when?.</p>
<p>. . .</p>
<p>In an API response this is the API <strong>header</strong>. It contains information about the data being delivered.</p>
<p>. . .</p>
<p>The <strong>body</strong> of the API contains the actual contents of the letter (the data). These data are most commonly delivered as a <code>JSON</code>.</p>
</section>
<section id="what-is-json" class="level2">
<h2 class="anchored" data-anchor-id="what-is-json">What is JSON?</h2>
<p>JSON stands for <strong>JavaScript Object Notation</strong>.</p>
<p>. . .</p>
<p>It‚Äôs the most common format for data exchanged through APIs.</p>
<p>. . .</p>
<p>Think of JSON as a structured way of storing <strong>key‚Äìvalue pairs</strong>, like a list or dictionary in R or Python.</p>
</section>
<section id="json-structure" class="level2">
<h2 class="anchored" data-anchor-id="json-structure">JSON Structure</h2>
<p>JSON objects are made of:</p>
<ul>
<li><strong>Keys</strong> (the name of a data field)</li>
<li><strong>Values</strong> (the data associated with that key)</li>
</ul>
<p>. . .</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"Pikachu"</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"height"</span><span class="fu">:</span> <span class="dv">4</span><span class="fu">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"weight"</span><span class="fu">:</span> <span class="dv">60</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"abilities"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"static"</span><span class="ot">,</span> <span class="st">"lightning-rod"</span><span class="ot">]</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="section-6" class="level2">
<h2 class="anchored" data-anchor-id="section-6"></h2>
<p><img src="https://substackcdn.com/image/fetch/$s_!t3KC!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3e7545dc-245a-4016-8dd7-7ec1f144dd50_1697x1089.jpeg" class="img-fluid"></p>
</section>
<section id="status-code" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="status-code">Status Code</h2>
<p>The <strong>status code</strong> tells you whether the request succeeded or failed</p>
<p>. . .</p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 34%">
<col style="width: 44%">
</colgroup>
<thead>
<tr class="header">
<th>Code</th>
<th>Meaning</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>200</strong></td>
<td>‚úÖ OK</td>
<td>The request succeeded and data is returned.</td>
</tr>
<tr class="even">
<td><strong>201</strong></td>
<td>üÜï Created</td>
<td>A new resource was successfully created.</td>
</tr>
<tr class="odd">
<td><strong>400</strong></td>
<td>‚ö†Ô∏è Bad Request</td>
<td>The request was malformed or invalid.</td>
</tr>
<tr class="even">
<td><strong>401</strong></td>
<td>üîê Unauthorized</td>
<td>Missing or invalid API key.</td>
</tr>
<tr class="odd">
<td><strong>403</strong></td>
<td>üö´ Forbidden</td>
<td>You don‚Äôt have permission to access the resource.</td>
</tr>
<tr class="even">
<td><strong>404</strong></td>
<td>‚ùì Not Found</td>
<td>The endpoint or item doesn‚Äôt exist.</td>
</tr>
<tr class="odd">
<td><strong>429</strong></td>
<td>üïê Too Many Requests</td>
<td>You‚Äôve hit the API‚Äôs rate limit.</td>
</tr>
<tr class="even">
<td><strong>500</strong></td>
<td>üí• Server Error</td>
<td>Something went wrong on the server side.</td>
</tr>
</tbody>
</table>
</section>
<section id="api-endpoints" class="level2">
<h2 class="anchored" data-anchor-id="api-endpoints">API Endpoints</h2>
<p>An API <strong>endpoint</strong> is a gateway where data is sent and received.</p>
<p>In RESTful web APIs, this corresponds to a URL.</p>
<p>. . .</p>
<p><code>https://pokeapi.co/api/v2/</code></p>
</section>
<section id="api-endpoints-1" class="level2">
<h2 class="anchored" data-anchor-id="api-endpoints-1">API Endpoints</h2>
<p>An API <strong>endpoint</strong> is a gateway where data is sent and received.</p>
<p>In RESTful web APIs, this corresponds to a URL.</p>
<p><code>https://pokeapi.co/api/v2/{endpoint}</code></p>
</section>
<section id="api-documentation" class="level2">
<h2 class="anchored" data-anchor-id="api-documentation">API Documentation</h2>
<p><a href="https://pokeapi.co/docs/v2#pokemon-section">https://pokeapi.co/docs/v2#pokemon-section</a></p>
<p><img src="images/pokemon-docs.png" class="img-fluid"></p>
</section>
<section id="abilities" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="abilities">Abilities</h2>
<p>Abilities provide passive effects for Pok√©mon in battle or in the overworld.</p>
<p>. . .</p>
<p><code>GET https://pokeapi.co/api/v2/ability</code></p>
<p>. . .</p>
<p>. . .</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"count"</span><span class="fu">:</span> <span class="dv">367</span><span class="fu">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"next"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/ability/?offset=20&amp;limit=20"</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"previous"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"results"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"stench"</span><span class="fu">,</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/ability/1/"</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"drizzle"</span><span class="fu">,</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/ability/2/"</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"speed-boost"</span><span class="fu">,</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/ability/3/"</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"battle-armor"</span><span class="fu">,</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/ability/4/"</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"sturdy"</span><span class="fu">,</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/ability/5/"</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="item" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="item">Item</h2>
<p>An item is an object in the games which the player can pick up, keep in their bag, and use in some manner. They have various uses, including healing, powering up, helping catch Pok√©mon, or to access a new area.</p>
<p>. . .</p>
<p><code>GET https://pokeapi.co/api/v2/item</code></p>
<p>. . .</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"count"</span><span class="fu">:</span> <span class="dv">2180</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"next"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/item/?offset=20&amp;limit=20"</span><span class="fu">,</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"previous"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"results"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"master-ball"</span><span class="fu">,</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/item/1/"</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"ultra-ball"</span><span class="fu">,</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/item/2/"</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"great-ball"</span><span class="fu">,</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/item/3/"</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"poke-ball"</span><span class="fu">,</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/item/4/"</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"safari-ball"</span><span class="fu">,</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/item/5/"</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"net-ball"</span><span class="fu">,</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/item/6/"</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"dive-ball"</span><span class="fu">,</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/item/7/"</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"nest-ball"</span><span class="fu">,</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/item/8/"</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"repeat-ball"</span><span class="fu">,</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://pokeapi.co/api/v2/item/9/"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="pagination" class="level2">
<h2 class="anchored" data-anchor-id="pagination">Pagination üìÑ</h2>
<p>Many APIs return only part of the dataset at once.</p>
<p>. . .</p>
<p>Addditionally, APIs often enact limits on the number of results that can be returned over a given time period.</p>
<p>. . .</p>
<p>Which parts of the dataset are returned are controlled by two parameters:</p>
<p>. . .</p>
<p><strong>limit</strong>: how many records to return</p>
<p>. . .</p>
<p><strong>offset</strong>: how many records to skip</p>
<p>. . .</p>
<p>To get all results, you can loop over offsets:</p>
<p>. . .</p>
<p><code>https://pokeapi.co/api/v2/item/?offset=20&amp;limit=20</code></p>
</section>
<section id="api-key" class="level2">
<h2 class="anchored" data-anchor-id="api-key">API Key üîë</h2>
<p>. . .</p>
<p>Many APIs require something called an <strong>API Key</strong></p>
<p>. . .</p>
<p>An API key is a unique code used to identify and authenticate a user or application when interacting with an API.</p>
<p>. . .</p>
<p>API keys are generally a string of alphanumeric characters, and look something like this:</p>
<p>. . .</p>
<p><code>zaCELgL0imfnc8mVLWwsAawjYr4RxAf50DDqtlx</code></p>
<p>. . .</p>
<p>API keys are a security measure to make sure you, or your application, are who you say you are.</p>
</section>
<section id="api-key-1" class="level2">
<h2 class="anchored" data-anchor-id="api-key-1">API Key üîë</h2>
<p>An API key is like an ID card. You wouldn‚Äôt leave your ID card laying around. Anyone could just pick it up and pretend they are you!</p>
<p>. . .</p>
<p>If you store plaintext API keys in code and share it (e.g., on GitHub), anyone with access can read it!</p>
<p>. . .</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>API_KEY <span class="op">=</span> <span class="st">'zaCELgL0imfnc8mVLWwsAawjYr4RxAf50DDqtl'</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>BASE_URL <span class="op">=</span> <span class="st">'https://api.nasa.gov/'</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>ENDPOINT <span class="op">=</span> <span class="st">'insight_weather/'</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>path_url <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>BASE_URL<span class="sc">}{</span>ENDPOINT<span class="sc">}</span><span class="ss">'</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>params <span class="op">=</span> {</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'feedtype'</span>: <span class="st">'json'</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ver'</span>: <span class="st">'1.0'</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'api_key'</span>: API_KEY</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>requests.get(path_url, params<span class="op">=</span>params)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="how-do-we-protect-our-api-keys" class="level2">
<h2 class="anchored" data-anchor-id="how-do-we-protect-our-api-keys">How do we protect our API keys?</h2>
<p><img src="https://media.tenor.com/BxBXA_6u-PQAAAAC/lotr-keep-it-safe.gif" class="img-fluid"></p>
</section>
<section id="environment-variables" class="level2">
<h2 class="anchored" data-anchor-id="environment-variables">Environment Variables</h2>
<p>A variable allows us to store information, and an environment is the system we execute our code on.</p>
<p>. . .</p>
<p>Environment variables allow us to store information specific to a system in variables.</p>
<p>. . .</p>
<p>Environment variables are not stored within our codebase, but are instead stored in a system specific configuration file.</p>
<p>. . .</p>
<p>We can use the environment variables configuration file to store our API key, and reference the configuration file in our code in order to load the API key.</p>
</section>
<section id="environment-variables-in-r" class="level2">
<h2 class="anchored" data-anchor-id="environment-variables-in-r">Environment Variables in R</h2>
<p>In Python, environment variables can be stored in a text file <code>.env</code> with name-value pairs.</p>
<p>. . .</p>
<p>We can then edit that file, using our editor of choice:</p>
<p><code>echo API_KEY=zaCELgL0imfnc8mVLWwsAawjYr4RxAf50DDqtlx &gt; .env</code></p>
</section>
<section id="section-7" class="level2">
<h2 class="anchored" data-anchor-id="section-7"></h2>
<p>Now we can update our code to retrieve our API environment variable:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>BASE_URL <span class="op">=</span> <span class="st">'https://api.nasa.gov/'</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>ENDPOINT <span class="op">=</span> <span class="st">'insight_weather/'</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>API_KEY <span class="op">=</span> os.environ.get(<span class="st">'API_KEY'</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>path_url <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>BASE_URL<span class="sc">}{</span>ENDPOINT<span class="sc">}</span><span class="ss">'</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>params <span class="op">=</span> {</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'feedtype'</span>: <span class="st">'json'</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ver'</span>: <span class="st">'1.0'</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'api_key'</span>: API_KEY</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>requests.get(path_url, params<span class="op">=</span>params)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="lets-give-it-a-try" class="level2">
<h2 class="anchored" data-anchor-id="lets-give-it-a-try">Let‚Äôs give it a try!</h2>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>